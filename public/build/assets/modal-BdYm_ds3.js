class a{constructor(t,e={}){if(this.target=null,this.modal=null,this.toggle=null,this.dismisses=null,this.transition=500,this.options={keyboard:!0,backdrop:!0,autofucus:!0,...e},this.documentOnKeydown=s=>this.hideOnKeydown({e:s,modal:this}),typeof t=="string")this.target=document.querySelector(t);else if(t instanceof HTMLElement)this.target=t;else throw new Error("No target element found");this.target.classList.contains("modal")?this.modal=this.target:(this.toggle=this.target,this.modal=document.querySelector(this.toggle.dataset.target),this.toggle.addEventListener("click",()=>this.show())),this.dismisses=this.modal.querySelectorAll('[data-dismiss="modal"]'),this.dismisses.length&&[...this.dismisses].forEach(s=>{s.addEventListener("click",()=>this.hide())})}show(){const t=this.modal;if(!t.classList.contains("show")){if(t.style.display="flex",t.appendChild(this.createBackdrop()),this.options.autofucus){const e=t.querySelector("input");e&&e.focus()}setTimeout(()=>{const e=t.querySelector(".modal-backdrop");t.classList.add("show"),e&&(e.classList.add("show"),e.addEventListener("click",()=>{this.options.backdrop&&this.options.backdrop!=="static"&&this.hide()})),this.options.keyboard&&document.addEventListener("keydown",this.documentOnKeydown)},15)}}hide(){const t=this.modal;if(t.classList.contains("show")){const e=t.querySelector(".modal-backdrop");t.classList.remove("show"),e&&e.classList.remove("show"),setTimeout(()=>{t.removeAttribute("style"),e.remove(),document.removeEventListener("keydown",this.documentOnKeydown)},this.transition)}}hideOnKeydown(t){const{e,modal:s}=t;e.key==="Escape"&&s.options.keyboard&&s.hide()}createBackdrop(){this.modal.querySelector(".modal-backdrop")&&this.modal.querySelector(".modal-backdrop").remove();const t=document.createElement("div");return t.setAttribute("class","modal-backdrop"),t}}const r={init(){const o=this.querySelectors('[data-toggle="modal"]');o.length&&o.forEach(t=>{const e=t.dataset.target;if(e){const s=document.querySelector(e),d={keyboard:s.dataset.keyboard!=="false",backdrop:(()=>{let i=!0;return s.dataset.backdrop==="static"&&(i="static"),s.dataset.backdrop==="false"&&(i=!1),i})()};new a(t,d)}})},querySelectors(o){let t=[];return o&&(t=[...document.querySelectorAll(o)].filter(e=>!e.parentElement.classList.contains("code-viewer-source"))),t}};window.createModal=function(o,t={}){return new a(o,t)};export{r as m};
